# v3.0 Release Log: Duolingo Max Extension (Chrome & Firefox)

TLDR: Duolingo Max Features were added.

### Major Changes
- **Unified Network-Level Patching (Chrome & Firefox):**  
  All relevant JavaScript files (`app-*.js`, `7220-*.js`, `6150-*.js`, `4370-*.js`) are intercepted and patched before execution.  
  - **Chrome:** Uses service worker for fetch/patch/caching, with fallback injection for edge cases.
  - **Firefox:** Uses `webRequest.filterResponseData` for network-level patching, preventing race conditions and ensuring reliable feature unlocks.

- **Consistent Caching Logic:**  
  All patched chunks are stored in `chrome.storage.local` using the same keys. This ensures fast load times and offline fallback for both browsers.

- **Page Hook Refactor:**  
  The page hook (`page_hook.js`) now only removes SRI/CORS/nonce attributes and never blocks scripts. This ensures compatibility with strict CSP setups.

### Fallback & Compatibility
- **Injection Fallback Remains:**  
  The fallback orchestrator (`injection.js`) is included for both Chrome and Firefox for edge cases or future compatibility, but is not normally invoked due to robust network-level patching.

### Manifest & Permissions
- **Manifest V2:**  
  Uses Manifest V2 for compatibility with both Chrome and Firefox's webRequest APIs.
- **Permissions Updated:**  
  Ensures `webRequest`, `webRequestBlocking`, and all necessary host permissions are present for both browsers.

### Bug Fixes
- **Consistent Patch Application:**  
  All target chunks (`app-*.js`, `7220-*.js`, `6150-*.js`, `4370-*.js`) are now patched reliably and consistently across both Chrome and Firefox.

### Extras
- **Notification Overhaul:**  
  Alerts are now issued to the user when a new version is detected from the github.
  It now tells you if there is a mini or major update.
- **Donations:**  
  Moved to the subscribtion tab instead of hearts tab.
  
### Usage Notes
- No user action required for updates on firefox. It will be automatically updated within seven days.
- If you experience issues with script loading, ensure you are using an up-to-date version of Chrome or Firefox that supports the necessary extension APIs.

---

